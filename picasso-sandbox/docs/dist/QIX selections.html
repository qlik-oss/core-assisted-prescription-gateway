<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>picasso.js docs - Qix Selections</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/github.min.css">
    <link href="../style.css" rel="stylesheet"/>
    <link href="../favicon.ico" rel="icon" >
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
    <script>
      window.onload = function() {
        hljs.configure({
          languages: ["javascript"]
        });

        var inlineBlocks = document.querySelectorAll('code');
        Array.prototype.slice.call(inlineBlocks).forEach(function(b) {
          if(b.parentNode.tagName !== "PRE") {
            b.classList.add("inline");
          } else {
            hljs.highlightBlock(b);
          }
        });
      };
    </script>
</head>
<body>
    <div id="page">
    <div class="header-wrapper">
      <div class="header">
        <a class="header-logo" href="./index.html">
          <img src="../picasso-logo.svg">
        </a>
        <div class="header-links">
          <!--<a href="#">Github</a>-->
        </div>
      </div>
    </div>
        <div class="container" id="container">
      <div class="sidebar">
        <ul><li>
  <a href="../dist/index.html">Index</a>
</li>
<li>
  <a href="../dist/QIX selections.html">QIX selections</a>
</li>
<li>
  <a href="../dist/README.html">README</a>
</li>
<li>
  <a href="../dist/brushing.html">Brushing</a>
</li>
<li>
  <a href="../dist/chart.html">Chart</a>
</li>
<li>
  <a href="../dist/component.html">Component</a>
</li>
<li>
  <a href="../dist/components/axis.html">Components / axis</a>
</li>
<li>
  <a href="../dist/components/box-marker.html">Components / box Marker</a>
</li>
<li>
  <a href="../dist/components/brush-area-dir.html">Components / brush Area Dir</a>
</li>
<li>
  <a href="../dist/components/brush-lasso.html">Components / brush Lasso</a>
</li>
<li>
  <a href="../dist/components/brush-range.html">Components / brush Range</a>
</li>
<li>
  <a href="../dist/components/grid-line.html">Components / grid Line</a>
</li>
<li>
  <a href="../dist/components/labels.html">Components / labels</a>
</li>
<li>
  <a href="../dist/components/legend-cat.html">Components / legend Cat</a>
</li>
<li>
  <a href="../dist/components/legend-seq.html">Components / legend Seq</a>
</li>
<li>
  <a href="../dist/components/line.html">Components / line</a>
</li>
<li>
  <a href="../dist/components/pie.html">Components / pie</a>
</li>
<li>
  <a href="../dist/components/point-marker.html">Components / point Marker</a>
</li>
<li>
  <a href="../dist/components/range.html">Components / range</a>
</li>
<li>
  <a href="../dist/components/ref-line.html">Components / ref Line</a>
</li>
<li>
  <a href="../dist/components/text.html">Components / text</a>
</li>
<li>
  <a href="../dist/data-brush.html">Data Brush</a>
</li>
<li>
  <a href="../dist/data.html">Data</a>
</li>
<li>
  <a href="../dist/dock-layout.html">Dock Layout</a>
</li>
<li>
  <a href="../dist/interaction.html">Interaction</a>
</li>
<li>
  <a href="../dist/interactions/hammer.html">Interactions / hammer</a>
</li>
<li>
  <a href="../dist/interactions/native.html">Interactions / native</a>
</li>
<li>
  <a href="../dist/picasso.html">Picasso</a>
</li>
<li>
  <a href="../dist/scales.html">Scales</a>
</li>
<li>
  <a href="../dist/scroll-api.html">Scroll Api</a>
</li>
</ul>
      </div>
      <div class="content">
              <h1 id="qix-selections-helper">QIX selections helper</h1>
<p>The QIX selections helper provides a mapping from brushed data points to suitable QIX selections.</p>
<h2 id="by-dimension-value">By dimension value</h2>
<p>Brushing dimension values is done by adding the value of <code>qElemNumber</code> to the brush, and providing the path to the relevant dimension:</p>
<pre><code class="lang-js">const b = chart.brush(&#39;selection&#39;);
b.addValue(&#39;/qHyperCube/qDimensionInfo/2&#39;, 4);
b.addValue(&#39;/qHyperCube/qDimensionInfo/2&#39;, 7);
</code></pre>
<p>Calling <code>q.brush</code> with the above instance generates relevant QIX methods and parameters to apply the selection:</p>
<pre><code class="lang-js">const selection = picasso.q.brush(b)[0];
// {
//   method: &#39;selectHyperCubeValues&#39;,
//   params: [
//     &#39;/qHyperCubeDef&#39;, // path to hypercube to apply selection on
//     2, // dimension column
//     [4, 7], // qElemNumbers
//     false
//   ]
// }
</code></pre>
<p>The selection can then be applied on a QIX model:</p>
<pre><code class="lang-js">model[selection.method](...selection.params);
</code></pre>
<h2 id="by-measure-range">By measure range</h2>
<p>Brushing measure ranges:</p>
<pre><code class="lang-js">const b = chart.brush(&#39;selection&#39;);
b.addRange(&#39;/qHyperCube/qMeasureInfo/2&#39;, { min: 13, max: 35 });

const selection = picasso.q.brush(b)[0];
// {
//   method: &#39;rangeSelectHyperCubeValues&#39;,
//   params: [&#39;/qHyperCubeDef&#39;, [
//     {
//       qMeasureIx: 2,
//       qRange: { qMin: 13, qMax: 35, qMinIncEq: true, qMaxInclEq: true }
//     }
//   ]]
// }
</code></pre>
<h2 id="by-dimension-range">By dimension range</h2>
<p>Brushing dimension ranges:</p>
<pre><code class="lang-js">const b = chart.brush(&#39;selection&#39;);
b.addRange(&#39;/qHyperCube/qDimensionInfo/1&#39;, { min: 13, max: 35 });

const selection = picasso.q.brush(b)[0];
// {
//   method: &#39;selectHyperCubeContinuousRange&#39;,
//   params: [&#39;/qHyperCubeDef&#39;, [
//     {
//       qDimIx: 1,
//       qRange: { qMin: 13, qMax: 35, qMinIncEq: true, qMaxInclEq: false }
//     }
//   ]]
// }
</code></pre>
<h2 id="by-row-indices">By row indices</h2>
<p>Brushing by table row index and column:</p>
<pre><code class="lang-js">const b = chart.brush(&#39;selection&#39;);
b.addValue(&#39;/qHyperCube/qDimensionInfo/1&#39;, 10);
b.addValue(&#39;/qHyperCube/qDimensionInfo/1&#39;, 13);
b.addValue(&#39;/qHyperCube/qDimensionInfo/0&#39;, 11);
b.addValue(&#39;/qHyperCube/qDimensionInfo/0&#39;, 17);
</code></pre>
<p>In the above case, rows <code>10</code> and <code>13</code> have been brushed on dimension <code>1</code>, and rows <code>11</code> and <code>17</code> on dimension <code>0</code>.
To extract the relevant information, <code>byCells</code> is enabled:</p>
<pre><code class="lang-js">const selection = picasso.q.brush(b, { byCells: true })[0];
// {
//   method: &#39;selectHyperCubeCells&#39;,
//   params: [
//     &#39;/qHyperCubeDef&#39;,
//     [10, 13], // row indices in hypercube
//     [1, 0] // column indices in hypercube
//   ]
// }
</code></pre>
<p>Row indices are used from the first dimension that adds a value to a brush,  <code>/qDimensionInfo/1</code> in above case.
To use values from another dimension, <code>primarySource</code> should be set:</p>
<pre><code class="lang-js">const selection = picasso.q.brush(b, {
  byCells: true,
  primarySource: &#39;/qHyperCube/qDimensionInfo/0&#39;
})[0];
// {
//   method: &#39;selectHyperCubeCells&#39;,
//   params: [
//     &#39;/qHyperCubeDef&#39;,
//     [11, 17], // row indices in hypercube
//     [1, 0] // column indices in hypercube
//   ]
// }
</code></pre>
<h2 id="by-attribute-dimension">By attribute dimension</h2>
<p>Brush on attribute dimension values:</p>
<pre><code class="lang-js">const b = chart.brush(&#39;selection&#39;);
b.addValue(&#39;/qHyperCube/qDimensionInfo/2/qAttrDimInfo/3&#39;, 6);
b.addValue(&#39;/qHyperCube/qDimensionInfo/2/qAttrDimInfo/3&#39;, 9);

const selection = picasso.q.brush(b)[0];
// {
//   method: &#39;selectHyperCubeValues&#39;,
//   params: [
//     &#39;/qHyperCubeDef/qDimensions/2/qAttributeDimensions/3&#39;, // path to hypercube to apply selection on
//     0, // dimension column in attribute dimension table
//     [6, 9], // qElemNumbers
//     false
//   ]
// }
</code></pre>
<h2 id="by-attribute-expression-range">By attribute expression range</h2>
<p>Brush on attribute expression range:</p>
<pre><code class="lang-js">const b = chart.brush(&#39;selection&#39;);
b.addRange(&#39;/qHyperCube/qMeasureInfo/1/qAttrExprInfo/2&#39;, { min: 11, max: 21 });
</code></pre>
<p>QIX selections on attribute expressions are similar to selections on measure ranges. In this case however, the index of the measure
is derived from the number of measures and attribute expressions that exist in the hypercube. Therefore, to calculate
the index, <code>layout</code> containing the hypercube needs to be provided as a parameter:</p>
<pre><code class="lang-js">const selection = picasso.q.brush(b, {}, layout)[0];
// {
//   method: &#39;rangeSelectHyperCubeValues&#39;,
//   params: [&#39;/qHyperCubeDef&#39;, [
//     {
//       qMeasureIx: 7,
//       qRange: { qMin: 11, qMax: 21, qMinIncEq: true, qMaxInclEq: true }
//     }
//   ]]
// }
</code></pre>
<p>Assuming a <code>layout</code> of:</p>
<pre><code class="lang-js">{
  qHyperCube: {
    qDimensionInfo: [
      { qAttrExprInfo: [{}] }
    ],
    qMeasureInfo: [
      { qAttrExprInfo: [{}, {}] },
      { qAttrExprInfo: [{}, {}, {/* this is the one */ }] }
    ]
  }
}
</code></pre>
<p>then <code>qMeasureIx</code> is calculated as follows:</p>
<ul>
<li>number of measures: <code>2</code></li>
<li>total number of attribute expressions in all dimensions: <code>1</code></li>
<li>total number of attribute expressions in measures preceding the one specified: <code>2</code> (from first measure)</li>
<li>the actual index of the specified attribute expression: <code>2</code></li>
</ul>
<p>which results in <code>2 + 1 + 2 + 2 = 7</code></p>

          </div>
        </div>
    </div>
</body>
</html>
