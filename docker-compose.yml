version: "3.1"

services:
  openresty:
    build: .
    command: -c /etc/nginx/compose.conf
    environment:
      SESSION_COOKIE_NAME: custom-analytics
      KIBANA_HOST: kibana
      KIBANA_PORT: 5601
      VISUALIZER_HOST: viz
      VISUALIZER_PORT: 8080
      QIX_SESSION_HOST: qliktive-qix-session-service
      QIX_SESSION_PORT: 9455
    networks:
      - qliktivecustomanalytics_default
    ports:
      - "80:80"

networks:
  qliktivecustomanalytics_default:
    external: true
